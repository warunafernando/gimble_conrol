[platformio]
src_dir = .

[env:esp32dev]
platform = espressif32
framework = arduino
board = esp32dev
board_build.partitions = partitions_4mb.csv
; APP_VERSION set by pre script (bump_version.py) from version.txt

build_src_filter = +<*> -<test/>

monitor_speed = 921600
upload_speed = 115200
upload_flags = 
    --before=no_reset
    --after=hard_reset
    --chip=esp32
    --connect-attempts=15
    --baud=115200

extra_scripts = 
    pre:extra_scripts/bump_version.py
    extra_scripts/upload_fixed.py
    tools/platformio_upload.py

lib_deps =
  wollewald/INA219_WE
  https://github.com/workloads/scservo.git

; ESP32-S3 with 8 MB flash (per schematic: W25Q64JVSSIQ)
[env:esp32s3_ota]
platform = espressif32
framework = arduino
board = esp32-s3-devkitc-1
board_build.partitions = partitions.csv
board_build.flash_mode = dio
board_build.flash_size = 8MB
; APP_VERSION set by pre script (bump_version.py) from version.txt

build_src_filter = +<*> -<test/>

monitor_speed = 921600
upload_speed = 115200
upload_flags = 
    --before=no_reset
    --after=hard_reset
    --chip=esp32s3
    --connect-attempts=15
    --baud=115200

extra_scripts = 
    pre:extra_scripts/bump_version.py
    extra_scripts/upload_fixed.py
    tools/platformio_upload.py

lib_deps =
  wollewald/INA219_WE
  https://github.com/workloads/scservo.git
